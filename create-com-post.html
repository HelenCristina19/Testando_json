<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interaçoes com APIs Create com POST</title>
</head>

<body>

    <nav class="navbar">
        <ul>
            <li><a href="./index.html"data-test="home">Home</a></li>
            <li><a href="./read-com-get.html">Read com Get</a></li>          
            <li><a href="./update-com-put.html">Update com Put</a></li>
            <li><a href="./delete-com-delete.html">Delete com Delete</a></li>
            <li><a href="./create-com-post.html">Create com Post</a></li>

        </ul>
    </nav>

    <header>
        <h1 class="title">Create com POST</h1>
    </header>

    <form action="" method="post">
        <label for="id:">ID</label>
        <input type="text" id = "id" disabled>

        <label for="descricao:">Descrição</label>
        <input type="text" id = "descricao">

        <label for="preco:">Preço</label>
        <input type="text" id = "preco">

        <button type ="button" id="btCadastrar">Cadastrar</button>


    </form>
<div id = "listaProdutos">

    <h2>Lista de Produtos</h2>

</div>
<script type="module" >
    import{ buscaProdutos } from './assets/scripts/create-com-post.js';
    buscaProdutos()

</script>
 
<script>


       
    fetch('http://localhost:3000/produtos',{
        method:'GET',
        headers:{
            'Content-type': 'application/json'
        }
    })
        .then(resposta => resposta.json())
        .then(resposta =>{
            for(let i = 0;i < resposta.length; i++){

                const ul = document.createElement('ul');
                ul.classList.add('produto');

                ul.appendChild(document.createElement('li')).
                innerHTML = resposta[i].id;
                ul.appendChild(document.createElement('li')).
                innerHTML = resposta[i].descricao;
                ul.appendChild(document.createElement('li')).
                innerHTML = resposta [i].preco;
            

                document.querySelector('#listaProdutos').appendChild
                (ul);
            }
           
        })
</script>
<script src="./assets/scripts/estilos.js"></script>
    
</body>
</html>